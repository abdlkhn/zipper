"use strict";void 0===THREE.OBJLoader2&&(THREE.OBJLoader2={}),void 0===THREE.LoaderSupport&&console.error('"THREE.LoaderSupport" is not available. "THREE.OBJLoader2" requires it. Please include "LoaderSupport.js" in your HTML.'),THREE.OBJLoader2=function(e){this.manager=THREE.LoaderSupport.Validator.verifyInput(e,THREE.DefaultLoadingManager),this.logging={enabled:!0,debug:!1},this.modelName="",this.instanceNo=0,this.path,this.resourcePath,this.useIndices=!1,this.disregardNormals=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.loaderRootNode=new THREE.Group,this.meshBuilder=new THREE.LoaderSupport.MeshBuilder,this.callbacks=new THREE.LoaderSupport.Callbacks,this.workerSupport=new THREE.LoaderSupport.WorkerSupport,this.terminateWorkerOnLoad=!0},THREE.OBJLoader2.OBJLOADER2_VERSION="2.5.1",console.info("Using THREE.OBJLoader2 version: "+THREE.OBJLoader2.OBJLOADER2_VERSION),THREE.OBJLoader2.prototype={constructor:THREE.OBJLoader2,setLogging:function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t,this.meshBuilder.setLogging(this.logging.enabled,this.logging.debug)},setModelName:function(e){this.modelName=THREE.LoaderSupport.Validator.verifyInput(e,this.modelName)},setPath:function(e){this.path=THREE.LoaderSupport.Validator.verifyInput(e,this.path)},setResourcePath:function(e){this.resourcePath=THREE.LoaderSupport.Validator.verifyInput(e,this.resourcePath)},setStreamMeshesTo:function(e){this.loaderRootNode=THREE.LoaderSupport.Validator.verifyInput(e,this.loaderRootNode)},setMaterials:function(e){this.meshBuilder.setMaterials(e)},setUseIndices:function(e){this.useIndices=!0===e},setDisregardNormals:function(e){this.disregardNormals=!0===e},setMaterialPerSmoothingGroup:function(e){this.materialPerSmoothingGroup=!0===e},setUseOAsMesh:function(e){this.useOAsMesh=!0===e},_setCallbacks:function(e){THREE.LoaderSupport.Validator.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),THREE.LoaderSupport.Validator.isValid(e.onReportError)&&this.callbacks.setCallbackOnReportError(e.onReportError),THREE.LoaderSupport.Validator.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),THREE.LoaderSupport.Validator.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),THREE.LoaderSupport.Validator.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials),this.meshBuilder._setCallbacks(this.callbacks)},onProgress:function(e,t,s){var o=THREE.LoaderSupport.Validator.isValid(t)?t:"",a={detail:{type:e,modelName:this.modelName,instanceNo:this.instanceNo,text:o,numericalValue:s}};THREE.LoaderSupport.Validator.isValid(this.callbacks.onProgress)&&this.callbacks.onProgress(a),this.logging.enabled&&this.logging.debug&&console.debug(o)},_onError:function(e){if(this.logging.enabled&&this.logging.debug&&console.log(e),!THREE.LoaderSupport.Validator.isValid(this.callbacks.onReportError))throw e;this.callbacks.onReportError(e)},load:function(e,t,s,o,a,r){var i=new THREE.LoaderSupport.ResourceDescriptor(e,"OBJ");this._loadObj(i,t,s,o,a,r)},_loadObj:function(e,t,s,o,a,r){var i=this;THREE.LoaderSupport.Validator.isValid(o)||(o=function(e){var t=e;e.currentTarget&&null!==e.currentTarget.statusText&&(t="Error occurred while downloading!\nurl: "+e.currentTarget.responseURL+"\nstatus: "+e.currentTarget.statusText),i._onError(t)}),THREE.LoaderSupport.Validator.isValid(e)||o("An invalid ResourceDescriptor was provided. Unable to continue!");var n=function(s){if(e.content=s,r)i.parseAsync(s,t);else{var o=new THREE.LoaderSupport.Callbacks;o.setCallbackOnMeshAlter(a),i._setCallbacks(o),t({detail:{loaderRootNode:i.parse(s),modelName:i.modelName,instanceNo:i.instanceNo}})}};if(this.setPath(e.path),this.setResourcePath(e.resourcePath),!THREE.LoaderSupport.Validator.isValid(e.url)||THREE.LoaderSupport.Validator.isValid(e.content))n(THREE.LoaderSupport.Validator.isValid(e.content)?e.content:null);else{if(!THREE.LoaderSupport.Validator.isValid(s)){var l=0,u=0;s=function(t){if(t.lengthComputable&&(u=t.loaded/t.total)>l){l=u;var s='Download of "'+e.url+'": '+(100*u).toFixed(2)+"%";i.onProgress("progressLoad",s,u)}}}var h=new THREE.FileLoader(this.manager);h.setPath(this.path||this.resourcePath),h.setResponseType("arraybuffer"),h.load(e.name,n,s,o)}},run:function(e,t){this._applyPrepData(e);var s=e.checkResourceDescriptorFiles(e.resources,[{ext:"obj",type:"ArrayBuffer",ignore:!1},{ext:"mtl",type:"String",ignore:!1},{ext:"zip",type:"String",ignore:!0}]);THREE.LoaderSupport.Validator.isValid(t)&&(this.terminateWorkerOnLoad=!1,this.workerSupport=t,this.logging.enabled=this.workerSupport.logging.enabled,this.logging.debug=this.workerSupport.logging.debug);var o=this;this._loadMtl(s.mtl,function(t){null!==t&&o.meshBuilder.setMaterials(t),o._loadObj(s.obj,o.callbacks.onLoad,null,null,o.callbacks.onMeshAlter,e.useAsync)},null,null,e.crossOrigin,e.materialOptions)},_applyPrepData:function(e){THREE.LoaderSupport.Validator.isValid(e)&&(this.setLogging(e.logging.enabled,e.logging.debug),this.setModelName(e.modelName),this.setStreamMeshesTo(e.streamMeshesTo),this.meshBuilder.setMaterials(e.materials),this.setUseIndices(e.useIndices),this.setDisregardNormals(e.disregardNormals),this.setMaterialPerSmoothingGroup(e.materialPerSmoothingGroup),this.setUseOAsMesh(e.useOAsMesh),this._setCallbacks(e.getCallbacks()))},parse:function(e){if(null==e)throw"Provided content is not a valid ArrayBuffer or String. Unable to continue parsing";this.logging.enabled&&console.time("OBJLoader2 parse: "+this.modelName),this.meshBuilder.init();var t=new THREE.OBJLoader2.Parser;t.setLogging(this.logging.enabled,this.logging.debug),t.setMaterialPerSmoothingGroup(this.materialPerSmoothingGroup),t.setUseOAsMesh(this.useOAsMesh),t.setUseIndices(this.useIndices),t.setDisregardNormals(this.disregardNormals),t.setMaterials(this.meshBuilder.getMaterials());var s=this;t.setCallbackOnAssetAvailable(function(e){var t,o=s.meshBuilder.processPayload(e);for(var a in o)t=o[a],s.loaderRootNode.add(t)});t.setCallbackOnProgress(function(e,t){s.onProgress("progressParse",e,t)});return t.setCallbackOnError(function(e){s._onError(e)}),e instanceof ArrayBuffer||e instanceof Uint8Array?(this.logging.enabled&&console.info("Parsing arrayBuffer..."),t.parse(e)):"string"==typeof e||e instanceof String?(this.logging.enabled&&console.info("Parsing text..."),t.parseText(e)):this._onError("Provided content was neither of type String nor Uint8Array! Aborting..."),this.logging.enabled&&console.timeEnd("OBJLoader2 parse: "+this.modelName),this.loaderRootNode},parseAsync:function(e,t){var s=this,o=!1;if(null==e)throw"Provided content is not a valid ArrayBuffer or String. Unable to continue parsing";(o=!0)&&this.logging.enabled&&console.time("OBJLoader2 parseAsync: "+this.modelName),this.meshBuilder.init();this.workerSupport.validate(function(e){var t="";return t+="/**\n",t+="  * This code was constructed by OBJLoader2 buildCode.\n",t+="  */\n\n",t+="THREE = { LoaderSupport: {}, OBJLoader2: {} };\n\n",t+=e.serializeClass("THREE.OBJLoader2.Parser",THREE.OBJLoader2.Parser)},"THREE.OBJLoader2.Parser"),this.workerSupport.setCallbacks(function(e){var t,o=s.meshBuilder.processPayload(e);for(var a in o)t=o[a],s.loaderRootNode.add(t)},function(){t({detail:{loaderRootNode:s.loaderRootNode,modelName:s.modelName,instanceNo:s.instanceNo}}),o&&s.logging.enabled&&console.timeEnd("OBJLoader2 parseAsync: "+s.modelName)}),s.terminateWorkerOnLoad&&this.workerSupport.setTerminateRequested(!0);var a={},r=this.meshBuilder.getMaterials();for(var i in r)a[i]=i;this.workerSupport.run({params:{useAsync:!0,materialPerSmoothingGroup:this.materialPerSmoothingGroup,useOAsMesh:this.useOAsMesh,useIndices:this.useIndices,disregardNormals:this.disregardNormals},logging:{enabled:this.logging.enabled,debug:this.logging.debug},materials:{materials:a},data:{input:e,options:null}})},loadMtl:function(e,t,s,o,a,r,i){var n=new THREE.LoaderSupport.ResourceDescriptor(e,"MTL");n.setContent(t),this._loadMtl(n,s,o,a,r,i)},_loadMtl:function(e,t,s,o,a,r){void 0===THREE.MTLLoader&&console.error('"THREE.MTLLoader" is not available. "THREE.OBJLoader2" requires it for loading MTL files.'),THREE.LoaderSupport.Validator.isValid(e)&&this.logging.enabled&&console.time("Loading MTL: "+e.name);var i={},n=this,l=function(s){var o=[];if(THREE.LoaderSupport.Validator.isValid(s))for(var a in s.preload(),o=s.materials)o.hasOwnProperty(a)&&(i[a]=o[a]);THREE.LoaderSupport.Validator.isValid(e)&&n.logging.enabled&&console.timeEnd("Loading MTL: "+e.name),t(i,s)};if(THREE.LoaderSupport.Validator.isValid(e)&&(THREE.LoaderSupport.Validator.isValid(e.content)||THREE.LoaderSupport.Validator.isValid(e.url))){var u=new THREE.MTLLoader(this.manager);a=THREE.LoaderSupport.Validator.verifyInput(a,"anonymous"),u.setCrossOrigin(a),u.setResourcePath(e.resourcePath||e.path),THREE.LoaderSupport.Validator.isValid(r)&&u.setMaterialOptions(r);var h=function(e){var t=e;"string"==typeof e||e instanceof String||(e.length>0||e.byteLength>0?t=THREE.LoaderUtils.decodeText(e):n._onError("Unable to parse mtl as it it seems to be neither a String, an Array or an ArrayBuffer!")),l(u.parse(t))};if(THREE.LoaderSupport.Validator.isValid(e.content))h(e.content);else if(THREE.LoaderSupport.Validator.isValid(e.url)){var c=new THREE.FileLoader(this.manager);if(THREE.LoaderSupport.Validator.isValid(o)||(o=function(e){n._onError(e)}),!THREE.LoaderSupport.Validator.isValid(s)){var d=0,g=0;s=function(t){if(t.lengthComputable&&(g=t.loaded/t.total)>d){d=g;var s='Download of "'+e.url+'": '+(100*g).toFixed(2)+"%";n.onProgress("progressLoad",s,g)}}}c.load(e.url,h,s,o)}}else l()}},THREE.OBJLoader2.Parser=function(){this.callbacks={onProgress:null,onAssetAvailable:null,onError:null},this.contentRef=null,this.legacyMode=!1,this.materials={},this.useAsync=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.useIndices=!1,this.disregardNormals=!1,this.vertices=[],this.colors=[],this.normals=[],this.uvs=[],this.rawMesh={objectName:"",groupName:"",activeMtlName:"",mtllibName:"",faceType:-1,subGroups:[],subGroupInUse:null,smoothingGroup:{splitMaterials:!1,normalized:-1,real:-1},counts:{doubleIndicesCount:0,faceCount:0,mtlCount:0,smoothingGroupCount:0}},this.inputObjectCount=1,this.outputObjectCount=1,this.globalCounts={vertices:0,faces:0,doubleIndicesCount:0,lineByte:0,currentByte:0,totalBytes:0},this.logging={enabled:!0,debug:!1}},THREE.OBJLoader2.Parser.prototype={constructor:THREE.OBJLoader2.Parser,resetRawMesh:function(){this.rawMesh.subGroups=[],this.rawMesh.subGroupInUse=null,this.rawMesh.smoothingGroup.normalized=-1,this.rawMesh.smoothingGroup.real=-1,this.pushSmoothingGroup(1),this.rawMesh.counts.doubleIndicesCount=0,this.rawMesh.counts.faceCount=0,this.rawMesh.counts.mtlCount=0,this.rawMesh.counts.smoothingGroupCount=0},setUseAsync:function(e){this.useAsync=e},setMaterialPerSmoothingGroup:function(e){this.materialPerSmoothingGroup=e},setUseOAsMesh:function(e){this.useOAsMesh=e},setUseIndices:function(e){this.useIndices=e},setDisregardNormals:function(e){this.disregardNormals=e},setMaterials:function(e){if(null!=e)for(var t in e)e.hasOwnProperty(t)&&(this.materials[t]=e[t])},setCallbackOnAssetAvailable:function(e){null!=e&&(this.callbacks.onAssetAvailable=e)},setCallbackOnProgress:function(e){null!=e&&(this.callbacks.onProgress=e)},setCallbackOnError:function(e){null!=e&&(this.callbacks.onError=e)},setLogging:function(e,t){this.logging.enabled=!0===e,this.logging.debug=!0===t},configure:function(){if(null===this.callbacks.onAssetAvailable){var e="Unable to run as no callback for building meshes is set.";if(null===this.callbacks.onError)throw e;this.callbacks.onError(e)}if(this.pushSmoothingGroup(1),this.logging.enabled){var t=Object.keys(this.materials),s="OBJLoader2.Parser configuration:"+(t.length>0?"\n\tmaterialNames:\n\t\t- "+t.join("\n\t\t- "):"\n\tmaterialNames: None")+"\n\tuseAsync: "+this.useAsync+"\n\tmaterialPerSmoothingGroup: "+this.materialPerSmoothingGroup+"\n\tuseOAsMesh: "+this.useOAsMesh+"\n\tuseIndices: "+this.useIndices+"\n\tdisregardNormals: "+this.disregardNormals;null!==this.callbacks.onProgress&&(s+="\n\tcallbacks.onProgress: "+this.callbacks.onProgress.name),null!==this.callbacks.onAssetAvailable&&(s+="\n\tcallbacks.onAssetAvailable: "+this.callbacks.onAssetAvailable.name),null!==this.callbacks.onError&&(s+="\n\tcallbacks.onError: "+this.callbacks.onError.name),console.info(s)}},parse:function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parse"),this.configure();var t=new Uint8Array(e);this.contentRef=t;var s=t.byteLength;this.globalCounts.totalBytes=s;for(var o,a=new Array(128),r="",i=0,n=0,l=0;l<s;l++)switch(o=t[l]){case 32:r.length>0&&(a[i++]=r),r="";break;case 47:r.length>0&&(a[i++]=r),n++,r="";break;case 10:r.length>0&&(a[i++]=r),r="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=l,this.processLine(a,i,n),i=0,n=0;break;case 13:break;default:r+=String.fromCharCode(o)}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parse")},parseText:function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parseText"),this.configure(),this.legacyMode=!0,this.contentRef=e;var t=e.length;this.globalCounts.totalBytes=t;for(var s,o=new Array(128),a="",r=0,i=0,n=0;n<t;n++)switch(s=e[n]){case" ":a.length>0&&(o[r++]=a),a="";break;case"/":a.length>0&&(o[r++]=a),i++,a="";break;case"\n":a.length>0&&(o[r++]=a),a="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=n,this.processLine(o,r,i),r=0,i=0;break;case"\r":break;default:a+=s}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parseText")},processLine:function(e,t,s){if(!(t<1)){var o,a,r,i,n=function(e,t,s,o){var a="";if(o>s){var r;if(t)for(r=s;r<o;r++)a+=e[r];else for(r=s;r<o;r++)a+=String.fromCharCode(e[r]);a=a.trim()}return a};switch(i=e[0]){case"v":this.vertices.push(parseFloat(e[1])),this.vertices.push(parseFloat(e[2])),this.vertices.push(parseFloat(e[3])),t>4&&(this.colors.push(parseFloat(e[4])),this.colors.push(parseFloat(e[5])),this.colors.push(parseFloat(e[6])));break;case"vt":this.uvs.push(parseFloat(e[1])),this.uvs.push(parseFloat(e[2]));break;case"vn":this.normals.push(parseFloat(e[1])),this.normals.push(parseFloat(e[2])),this.normals.push(parseFloat(e[3]));break;case"f":if(o=t-1,0===s)for(this.checkFaceType(0),r=2,a=o;r<a;r++)this.buildFace(e[1]),this.buildFace(e[r]),this.buildFace(e[r+1]);else if(o===2*s)for(this.checkFaceType(1),r=3,a=o-2;r<a;r+=2)this.buildFace(e[1],e[2]),this.buildFace(e[r],e[r+1]),this.buildFace(e[r+2],e[r+3]);else if(2*o==3*s)for(this.checkFaceType(2),r=4,a=o-3;r<a;r+=3)this.buildFace(e[1],e[2],e[3]),this.buildFace(e[r],e[r+1],e[r+2]),this.buildFace(e[r+3],e[r+4],e[r+5]);else for(this.checkFaceType(3),r=3,a=o-2;r<a;r+=2)this.buildFace(e[1],void 0,e[2]),this.buildFace(e[r],void 0,e[r+1]),this.buildFace(e[r+2],void 0,e[r+3]);break;case"l":case"p":if((o=t-1)===2*s)for(this.checkFaceType(4),r=1,a=o+1;r<a;r+=2)this.buildFace(e[r],e[r+1]);else for(this.checkFaceType("l"===i?5:6),r=1,a=o+1;r<a;r++)this.buildFace(e[r]);break;case"s":this.pushSmoothingGroup(e[1]);break;case"g":this.processCompletedMesh(),this.rawMesh.groupName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"o":this.useOAsMesh&&this.processCompletedMesh(),this.rawMesh.objectName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"mtllib":this.rawMesh.mtllibName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);break;case"usemtl":var l=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);""!==l&&this.rawMesh.activeMtlName!==l&&(this.rawMesh.activeMtlName=l,this.rawMesh.counts.mtlCount++,this.checkSubGroup())}}},pushSmoothingGroup:function(e){var t=parseInt(e);isNaN(t)&&(t="off"===e?0:1);var s=this.rawMesh.smoothingGroup.normalized;this.rawMesh.smoothingGroup.normalized=this.rawMesh.smoothingGroup.splitMaterials?t:0===t?0:1,this.rawMesh.smoothingGroup.real=t,s!==t&&(this.rawMesh.counts.smoothingGroupCount++,this.checkSubGroup())},checkFaceType:function(e){this.rawMesh.faceType!==e&&(this.processCompletedMesh(),this.rawMesh.faceType=e,this.checkSubGroup())},checkSubGroup:function(){var e=this.rawMesh.activeMtlName+"|"+this.rawMesh.smoothingGroup.normalized;this.rawMesh.subGroupInUse=this.rawMesh.subGroups[e],void 0!==this.rawMesh.subGroupInUse&&null!==this.rawMesh.subGroupInUse||(this.rawMesh.subGroupInUse={index:e,objectName:this.rawMesh.objectName,groupName:this.rawMesh.groupName,materialName:this.rawMesh.activeMtlName,smoothingGroup:this.rawMesh.smoothingGroup.normalized,vertices:[],indexMappingsCount:0,indexMappings:[],indices:[],colors:[],uvs:[],normals:[]},this.rawMesh.subGroups[e]=this.rawMesh.subGroupInUse)},buildFace:function(e,t,s){this.disregardNormals&&(s=void 0);var o=this,a=function(){var a=parseInt(e),r=3*(a>0?a-1:a+o.vertices.length/3),i=o.colors.length>0?r:null,n=o.rawMesh.subGroupInUse.vertices;if(n.push(o.vertices[r++]),n.push(o.vertices[r++]),n.push(o.vertices[r]),null!==i){var l=o.rawMesh.subGroupInUse.colors;l.push(o.colors[i++]),l.push(o.colors[i++]),l.push(o.colors[i])}if(t){var u=parseInt(t),h=2*(u>0?u-1:u+o.uvs.length/2),c=o.rawMesh.subGroupInUse.uvs;c.push(o.uvs[h++]),c.push(o.uvs[h])}if(s){var d=parseInt(s),g=3*(d>0?d-1:d+o.normals.length/3),p=o.rawMesh.subGroupInUse.normals;p.push(o.normals[g++]),p.push(o.normals[g++]),p.push(o.normals[g])}};if(this.useIndices){var r=e+(t?"_"+t:"_n")+(s?"_"+s:"_n"),i=this.rawMesh.subGroupInUse.indexMappings[r];null==i?(i=this.rawMesh.subGroupInUse.vertices.length/3,a(),this.rawMesh.subGroupInUse.indexMappings[r]=i,this.rawMesh.subGroupInUse.indexMappingsCount++):this.rawMesh.counts.doubleIndicesCount++,this.rawMesh.subGroupInUse.indices.push(i)}else a();this.rawMesh.counts.faceCount++},createRawMeshReport:function(e){return"Input Object number: "+e+"\n\tObject name: "+this.rawMesh.objectName+"\n\tGroup name: "+this.rawMesh.groupName+"\n\tMtllib name: "+this.rawMesh.mtllibName+"\n\tVertex count: "+this.vertices.length/3+"\n\tNormal count: "+this.normals.length/3+"\n\tUV count: "+this.uvs.length/2+"\n\tSmoothingGroup count: "+this.rawMesh.counts.smoothingGroupCount+"\n\tMaterial count: "+this.rawMesh.counts.mtlCount+"\n\tReal MeshOutputGroup count: "+this.rawMesh.subGroups.length},finalizeRawMesh:function(){var e,t,s=[],o=0,a=0,r=0,i=0,n=0,l=0;for(var u in this.rawMesh.subGroups)if((e=this.rawMesh.subGroups[u]).vertices.length>0){if((t=e.indices).length>0&&a>0)for(var h in t)t[h]=t[h]+a;s.push(e),o+=e.vertices.length,a+=e.indexMappingsCount,r+=e.indices.length,i+=e.colors.length,l+=e.uvs.length,n+=e.normals.length}var c=null;return s.length>0&&(c={name:""!==this.rawMesh.groupName?this.rawMesh.groupName:this.rawMesh.objectName,subGroups:s,absoluteVertexCount:o,absoluteIndexCount:r,absoluteColorCount:i,absoluteNormalCount:n,absoluteUvCount:l,faceCount:this.rawMesh.counts.faceCount,doubleIndicesCount:this.rawMesh.counts.doubleIndicesCount}),c},processCompletedMesh:function(){var e=this.finalizeRawMesh(),t=null!==e;if(t){this.colors.length>0&&this.colors.length!==this.vertices.length&&null!==this.callbacks.onError&&this.callbacks.onError("Vertex Colors were detected, but vertex count and color count do not match!"),this.logging.enabled&&this.logging.debug&&console.debug(this.createRawMeshReport(this.inputObjectCount)),this.inputObjectCount++,this.buildMesh(e);var s=this.globalCounts.currentByte/this.globalCounts.totalBytes;return null!==this.callbacks.onProgress&&this.callbacks.onProgress("Completed [o: "+this.rawMesh.objectName+" g:"+this.rawMesh.groupName+"] Total progress: "+(100*s).toFixed(2)+"%",s),this.resetRawMesh(),!0}return t},buildMesh:function(e){var t=e.subGroups,s=new Float32Array(e.absoluteVertexCount);this.globalCounts.vertices+=e.absoluteVertexCount/3,this.globalCounts.faces+=e.faceCount,this.globalCounts.doubleIndicesCount+=e.doubleIndicesCount;var o,a,r,i,n,l,u,h=e.absoluteIndexCount>0?new Uint32Array(e.absoluteIndexCount):null,c=e.absoluteColorCount>0?new Float32Array(e.absoluteColorCount):null,d=e.absoluteNormalCount>0?new Float32Array(e.absoluteNormalCount):null,g=e.absoluteUvCount>0?new Float32Array(e.absoluteUvCount):null,p=null!==c,b=[],m=t.length>1,f=0,E=[],M=[],v=0,w=0,C=0,L=0,R=0,T=0,y=0;for(var k in t)if(t.hasOwnProperty(k)){if(u=(o=t[k]).materialName,l=this.rawMesh.faceType<4?u+(p?"_vertexColor":"")+(0===o.smoothingGroup?"_flat":""):6===this.rawMesh.faceType?"defaultPointMaterial":"defaultLineMaterial",i=this.materials[u],n=this.materials[l],null==i&&null==n&&(l=p?"defaultVertexColorMaterial":"defaultMaterial",n=this.materials[l],this.logging.enabled&&console.info('object_group "'+o.objectName+"_"+o.groupName+'" was defined with unresolvable material "'+u+'"! Assigning "'+l+'".')),null==n){var N={materialNameOrg:u,materialName:l,materialProperties:{vertexColors:p?2:0,flatShading:0===o.smoothingGroup}},O={cmd:"materialData",materials:{materialCloneInstructions:N}};this.callbacks.onAssetAvailable(O),this.useAsync&&(this.materials[l]=N)}if(m?((a=E[l])||(a=f,E[l]=f,b.push(l),f++),r={start:T,count:y=this.useIndices?o.indices.length:o.vertices.length/3,index:a},M.push(r),T+=y):b.push(l),s.set(o.vertices,v),v+=o.vertices.length,h&&(h.set(o.indices,w),w+=o.indices.length),c&&(c.set(o.colors,C),C+=o.colors.length),d&&(d.set(o.normals,L),L+=o.normals.length),g&&(g.set(o.uvs,R),R+=o.uvs.length),this.logging.enabled&&this.logging.debug){var S=null==a?"":"\n\t\tmaterialIndex: "+a,P="\tOutput Object no.: "+this.outputObjectCount+"\n\t\tgroupName: "+o.groupName+"\n\t\tIndex: "+o.index+"\n\t\tfaceType: "+this.rawMesh.faceType+"\n\t\tmaterialName: "+o.materialName+"\n\t\tsmoothingGroup: "+o.smoothingGroup+S+"\n\t\tobjectName: "+o.objectName+"\n\t\t#vertices: "+o.vertices.length/3+"\n\t\t#indices: "+o.indices.length+"\n\t\t#colors: "+o.colors.length/3+"\n\t\t#uvs: "+o.uvs.length/2+"\n\t\t#normals: "+o.normals.length/3;console.debug(P)}}this.outputObjectCount++,this.callbacks.onAssetAvailable({cmd:"meshData",progress:{numericalValue:this.globalCounts.currentByte/this.globalCounts.totalBytes},params:{meshName:e.name},materials:{multiMaterial:m,materialNames:b,materialGroups:M},buffers:{vertices:s,indices:h,colors:c,normals:d,uvs:g},geometryType:this.rawMesh.faceType<4?0:6===this.rawMesh.faceType?2:1},[s.buffer],null!==h?[h.buffer]:null,null!==c?[c.buffer]:null,null!==d?[d.buffer]:null,null!==g?[g.buffer]:null)},finalizeParsing:function(){if(this.logging.enabled&&console.info("Global output object count: "+this.outputObjectCount),this.processCompletedMesh()&&this.logging.enabled){var e="Overall counts: \n\tVertices: "+this.globalCounts.vertices+"\n\tFaces: "+this.globalCounts.faces+"\n\tMultiple definitions: "+this.globalCounts.doubleIndicesCount;console.info(e)}}};
